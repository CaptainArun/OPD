<div class="overflow-hidden px-4">
  <h5 class="p-3 title-bg mt-2">Visit Case Sheet</h5>
  <div class="white">
    <mat-card class="p-0">
      <app-patient-demographic [PatID]="patientId"></app-patient-demographic>
    </mat-card>
  </div>
  <div class="col-xl-12 row px-0 mx-0">
    <div class="mt-4 col-xl-10 p-0">
      <div class="row">
        <div class="col-md-12 col-sm-12 col-xs-12  dark-color padding-none">
          <mat-accordion>
            <mat-expansion-panel>
              <mat-expansion-panel-header>
                <mat-panel-title>
                  Visit History
                </mat-panel-title>
              </mat-expansion-panel-header>
              <div class="row" *ngIf="showVisitHistory">
                <app-bms-table [config]="tableConfig" [datas]="patientVisitHistoryList" (viewItem)="openVisitView($event)" (historyItem)="openVisitHistory($event)"></app-bms-table>
              </div>
              <mat-card *ngIf="!showVisitHistory">
                <h3>No Record Found</h3>
              </mat-card>
            </mat-expansion-panel>
          </mat-accordion>
        </div>
      </div>

      <div class="bg-white p-4 mt-3 upload-da">
        <div class="row">
          <div class="col-md-12 col-sm-12 col-xs-12  dark-color padding-none">
            <mat-tab-group [selectedIndex]="selectedIndex">
              <mat-tab label="Diagnosis">
                <form [formGroup]="diagnosisForm">
                  <div class="row mt-3">
                    <div class="col-xl-3 col-lg-6 pb-3 pt-3">
                      <mat-form-field class="w-100" appearance="outline">
                        <mat-label>Visit Date & Time</mat-label>
                        <input matInput formControlName="VisitDateandTime1" readonly>
                      </mat-form-field>
                    </div>

                    <div class="col-xl-2 col-lg-6 pb-3 pt-3">
                      <mat-form-field class="w-100" appearance="outline">
                        <mat-label>Recorded Date</mat-label>
                        <input matInput [matDatepicker]="Vitals" formControlName="RecordedDate1">
                        <mat-datepicker-toggle matSuffix [for]="Vitals"></mat-datepicker-toggle>
                        <mat-datepicker #Vitals></mat-datepicker>
                      </mat-form-field>
                    </div>

                    <div class="col-lg-2 timepick pb-3 pt-3">
                      <mat-form-field class="input-full-width timer w-100" appearance="outline">
                        <input matInput [ngxTimepicker]="Vitals1" [disableClick]="true" formControlName="RecordedTime1">
                        <mat-label>Recorded Time</mat-label>
                        <ngx-material-timepicker-toggle [for]="Vitals1"></ngx-material-timepicker-toggle>
                        <ngx-material-timepicker #Vitals1 defaultTime="{{time}}"></ngx-material-timepicker>
                      </mat-form-field>
                    </div>

                    <div class="col-xl-2 col-lg-6 pb-3 pt-3">
                      <mat-form-field class="w-100" appearance="outline">
                        <mat-label>Recorded During</mat-label>
                        <input matInput placeholder="Enter" formControlName="recordedDuring1" maxlength="75" readonly>
                      </mat-form-field>
                    </div>

                    <div class="col-xl-3 col-lg-6 pb-3 pt-3">
                      <mat-form-field class="w-100" appearance="outline">
                        <mat-label><span class="required-asterisk" *ngIf="(diagnosisForm.value.RecordedBy1 == '' || diagnosisForm.value.RecordedBy1 == null) ? true : false"></span>Recorded By</mat-label>
                        <mat-select formControlName="RecordedBy1">
                          <mat-option *ngFor="let value of recordby" [value]="value">{{value}}</mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                  </div>

                  <div class="row">
                    <h5 class="py-1 pt-2 col-xl-12">Problem Details</h5>
                    <div class="col-12 pb-1 pt-4">
                      <div class="row">

                        <div class="col-xl-6 col-lg-6">
                          <mat-form-field class="w-100" appearance="outline" [matTooltip]="diagnosisForm.get('ChiefComplaint').value" matTooltipPosition="above" matTooltipClass="Tooltip-lg">
                            <mat-label><span class="required-asterisk" *ngIf="(diagnosisForm.value.ChiefComplaint == '' || diagnosisForm.value.ChiefComplaint == null) ? true : false"></span>Chief Complaint</mat-label>
                            <textarea matInput placeholder="Enter" rows="1" cols="1" maxlength="500" formControlName="ChiefComplaint"></textarea>
                          </mat-form-field>
                        </div>

                        <div class="col-xl-3 col-lg-6">
                          <mat-form-field class="w-100" appearance="outline" [matTooltip]="problemAreaTooltip" matTooltipPosition="above" matTooltipClass="Tooltip-md">
                            <mat-label><span class="required-asterisk" *ngIf="(diagnosisForm.value.ProblemAreaID == '' || diagnosisForm.value.ProblemAreaID == null) ? true : false"></span>Problem Area/Location</mat-label>
                            <mat-select formControlName="ProblemAreaID" multiple>
                              <mat-option *ngFor="let problemArea of problemAreavalues" (click)="setProblemAreaTooltip()" [value]="problemArea.ProblemAreaId">{{problemArea.ProblemAreaDescription}}</mat-option>
                            </mat-select>
                          </mat-form-field>
                        </div>

                        <div class="col-xl-3 col-lg-6">
                          <mat-form-field class="w-100" appearance="outline">
                            <mat-label><span class="required-asterisk" *ngIf="(diagnosisForm.value.ProblemDuration == '' || diagnosisForm.value.ProblemDuration == null) ? true : false"></span>Problem Duration</mat-label>
                            <input matInput placeholder="Enter" formControlName="ProblemDuration" maxlength="75" numeric autocomplete="off">
                          </mat-form-field>
                        </div>
                        
                        <div class="col-xl-6 col-lg-6">
                          <mat-form-field class="w-100" appearance="outline" [matTooltip]="diagnosisForm.get('PreviousHistory').value" matTooltipPosition="above" matTooltipClass="Tooltip-lg">
                            <mat-label>Previous History</mat-label>
                            <textarea matInput placeholder="Enter" rows="1" cols="1" maxlength="500" formControlName="PreviousHistory"></textarea>
                          </mat-form-field>
                        </div>

                        <div class="col-xl-3 col-lg-6">
                          <mat-form-field class="w-100" appearance="outline" [matTooltip]="symptomsTooltip" matTooltipPosition="above" matTooltipClass="Tooltip-lg">
                            <mat-label><span class="required-asterisk" *ngIf="(diagnosisForm.value.SymptomsID == '' || diagnosisForm.value.SymptomsID == null) ? true : false"></span>Symptoms</mat-label>
                            <mat-select formControlName="SymptomsID" multiple>
                              <mat-option *ngFor="let symptom of symptoms" (click)="setSymptomsTooltip()" [value]="symptom.SymptomsId">{{symptom.SymptomsDescription}}</mat-option>
                            </mat-select>
                          </mat-form-field>
                        </div>

                        <div class="col-xl-6 col-lg-6">
                          <mat-form-field class="w-100" appearance="outline" [matTooltip]="diagnosisForm.get('OtherSymptoms').value" matTooltipPosition="above" matTooltipClass="Tooltip-lg">
                            <mat-label>Other Symptoms</mat-label>
                            <textarea matInput placeholder="Enter" rows="1" cols="1" maxlength="500" formControlName="OtherSymptoms"></textarea>
                          </mat-form-field>
                        </div>

                        <div class="col-xl-3 col-lg-6">
                          <mat-form-field class="w-100" appearance="outline">
                            <mat-label>Pain / Discomfort level (0-10)</mat-label>
                            <mat-select formControlName="PainScale">
                              <mat-option *ngFor="let pain of painScale" [value]="pain.PainScaleID">{{pain.PainScaleDesc}}</mat-option>
                            </mat-select>
                          </mat-form-field>
                        </div>

                        <div class="col-xl-6 col-lg-6">
                          <mat-form-field class="w-100" appearance="outline" [matTooltip]="diagnosisForm.get('PainNotes').value" matTooltipPosition="above" matTooltipClass="Tooltip-lg">
                            <mat-label>Pain Notes</mat-label>
                            <textarea matInput placeholder="Enter" rows="1" cols="1" maxlength="500" formControlName="PainNotes"></textarea>
                          </mat-form-field>
                        </div>

                        <div class="col-xl-3 col-lg-6">
                          <mat-form-field class="w-100" appearance="outline">
                            <mat-label>Pain Duration & Timings</mat-label>
                            <input matInput placeholder="Enter" formControlName="Timings" maxlength="75" numeric autocomplete="off">
                          </mat-form-field>
                        </div>

                        <div class="col-xl-3 col-lg-6">
                          <mat-form-field class="w-100" appearance="outline" [matTooltip]="problemTypeTooltip" matTooltipPosition="above" matTooltipClass="Tooltip-md">
                            <mat-label><span class="required-asterisk" *ngIf="(diagnosisForm.value.ProblemTypeID == '' || diagnosisForm.value.ProblemTypeID == null) ? true : false"></span>Problem Type</mat-label>
                            <mat-select formControlName="ProblemTypeID" multiple>
                              <mat-option *ngFor="let problem of problemTypes" (click)="setProblemTypeTooltip()" [value]="problem.ProblemTypeId">{{problem.ProblemTypeDescription}}</mat-option>
                            </mat-select>
                          </mat-form-field>
                        </div>

                        <div class="col-xl-6 col-lg-6" [matTooltip]="diagnosisForm.get('AggravatedBy').value" matTooltipPosition="above" matTooltipClass="Tooltip-lg">
                          <mat-form-field class="w-100" appearance="outline">
                            <mat-label>Problem Aggravated by</mat-label>
                            <textarea matInput placeholder="Enter" rows="1" cols="1" maxlength="500" formControlName="AggravatedBy"></textarea>
                          </mat-form-field>
                        </div>

                        <div class="col-xl-6 col-lg-6">
                          <mat-form-field class="w-100" appearance="outline" [matTooltip]="diagnosisForm.get('Alleviatedby').value" matTooltipPosition="above" matTooltipClass="Tooltip-lg">
                            <mat-label>Problem Alliviated by</mat-label>
                            <textarea matInput placeholder="Enter" rows="1" cols="1" maxlength="500" formControlName="Alleviatedby"></textarea>
                          </mat-form-field>
                        </div>

                        <div class="col-xl-3 col-lg-6">
                          <mat-form-field class="w-100" appearance="outline">
                            <mat-label><span class="required-asterisk" *ngIf="(diagnosisForm.value.ProblemStatus == '' || diagnosisForm.value.ProblemStatus == null) ? true : false"></span>Problem Status</mat-label>
                            <mat-select formControlName="ProblemStatus">
                              <mat-option *ngFor="let pbmStatus of problemStatus" [value]="pbmStatus.ProblemStatusDesc">{{pbmStatus.ProblemStatusDesc}}</mat-option>
                            </mat-select>
                          </mat-form-field>
                        </div>

                        <div class="col-xl-6 col-lg-6">
                          <mat-form-field class="w-100" appearance="outline" [matTooltip]="diagnosisForm.get('Observationotes').value" matTooltipPosition="above" matTooltipClass="Tooltip-lg">
                            <mat-label>Observation Notes</mat-label>
                            <textarea matInput placeholder="Enter" rows="1" cols="1" maxlength="500" formControlName="Observationotes"></textarea>
                          </mat-form-field>
                        </div>

                        <div class="col-xl-6 col-lg-6">
                          <mat-form-field class="w-100" appearance="outline" [matTooltip]="diagnosisForm.get('InteractionSummary').value" matTooltipPosition="above" matTooltipClass="Tooltip-lg">
                            <mat-label>Interaction Summary</mat-label>
                            <textarea matInput placeholder="Enter" rows="1" cols="1" maxlength="500" formControlName="InteractionSummary"></textarea>
                          </mat-form-field>
                        </div>

                        <div class="col-xl-6 col-lg-6">
                          <mat-form-field class="w-100" appearance="outline" [matTooltip]="diagnosisForm.get('PAdditionalNotes').value" matTooltipPosition="above" matTooltipClass="Tooltip-lg">
                            <mat-label>P-Additional Notes</mat-label>
                            <textarea matInput placeholder="Enter" rows="1" cols="1" maxlength="500" formControlName="PAdditionalNotes"></textarea>
                          </mat-form-field>
                        </div>
                      </div>
                    </div>

                    <h5 class="py-1 pt-2 col-xl-12">Diagnosis</h5>
                    <div class="col-12 pb-1 pt-4">
                      <div class="row">
                        <div class="col-xl-6 col-lg-6">
                          <mat-form-field class="w-100" appearance="outline" [matTooltip]="diagnosisForm.get('Prognosis').value" matTooltipPosition="above" matTooltipClass="Tooltip-lg">
                            <mat-label>Prognosis</mat-label>
                            <textarea matInput placeholder="Enter" rows="1" cols="1" maxlength="500" formControlName="Prognosis"></textarea>
                          </mat-form-field>
                        </div>

                        <div class="col-xl-6 col-lg-6">
                          <mat-form-field class="w-100" appearance="outline" [matTooltip]="diagnosisForm.get('AssessmentNotes').value" matTooltipPosition="above" matTooltipClass="Tooltip-lg">
                            <mat-label>Assessment Notes</mat-label>
                            <textarea matInput placeholder="Enter" rows="1" cols="1" maxlength="500" formControlName="AssessmentNotes"></textarea>
                          </mat-form-field>
                        </div>

                        <div class="col-xl-6 col-lg-6">
                          <mat-form-field class="w-100" appearance="outline" [matTooltip]="diagnosisForm.get('DiagnosisNotes').value" matTooltipPosition="above" matTooltipClass="Tooltip-lg">
                            <mat-label>Diagnosis Notes</mat-label>
                            <textarea matInput placeholder="Enter" rows="1" cols="1" maxlength="500" formControlName="DiagnosisNotes"></textarea>
                          </mat-form-field>
                        </div>

                        <div class="col-xl-6 col-lg-6">
                          <mat-form-field class="w-100" appearance="outline" [matTooltip]="diagnosisForm.get('Etiology').value" matTooltipPosition="above" matTooltipClass="Tooltip-lg">
                            <mat-label>Etiology</mat-label>
                            <textarea matInput placeholder="Enter" rows="1" cols="1" maxlength="500" formControlName="Etiology"></textarea>
                          </mat-form-field>
                        </div>

                        <div class="col-xl-6 col-lg-6">
                          <mat-form-field class="w-100" appearance="outline" [matTooltip]="icdTool" matTooltipPosition="above" matTooltipClass="Tooltip-lg">
                            <mat-label>Primary ICD Code</mat-label>
                            <mat-icon matSuffix *ngIf="(diagnosisForm.value.ICD10 == '' || diagnosisForm.value.ICD10 == null) ? true : (diagnosisForm.value.ICD10.length > 2) ? false : true">search</mat-icon>
                            <textarea placeholder="Type and Select" rows="1" matInput #autoCompleteICD10Input="matAutocompleteTrigger" [matAutocomplete]="icdCode" maxlength="500" formControlName="ICD10"></textarea>
                            <mat-autocomplete autoActiveFirstOption #icdCode="matAutocomplete">
                              <mat-option *ngFor="let ICD of ICDCodes" (onSelectionChange)="setICDTool(ICD.ICDCode, ICD.Description)" [value]="ICD.ICDCode + '-' + ICD.Description">{{ICD.ICDCode}} - {{ICD.Description}}</mat-option>
                            </mat-autocomplete>
                          </mat-form-field>
                        </div>

                        <div class="col-xl-6 col-lg-6">
                          <mat-form-field class="w-100" appearance="outline" [matTooltip]="diagnosisForm.get('DAdditionalNotes').value" matTooltipPosition="above" matTooltipClass="Tooltip-lg">
                            <mat-label>D-Additional Notes</mat-label>
                            <textarea matInput placeholder="Enter" rows="1" cols="1" maxlength="500" formControlName="DAdditionalNotes"></textarea>
                          </mat-form-field>
                        </div>

                        <div class="col-xl-6 col-lg-6 pb-2 my-2 text-left">
                          <input type="file" #image accept="image/*" (change)="onImageUpload($event)" multiple hidden>
                          <button type="button" mat-raised-button color="primary" (click)="image.click()" [disabled]="uploadImg">Upload Images</button>
                          <mat-list>
                            <mat-list-item *ngFor="let file of listOfImgFiles; let index = index">
                              <i class="fa fa-picture-o" aria-hidden="true"></i> &nbsp;&nbsp;
                              <a [href]="file.FileBlobUrl" target="_blank">{{file.FileName}}</a> &nbsp; [{{file.Size}}] &nbsp;
                              <button type="button" mat-mini-fab color="warn" (click)="removeImgFiles(file.FileName, index)" [hidden]="showIcon">
                                <mat-icon>close</mat-icon>
                              </button>
                            </mat-list-item>
                          </mat-list>
                        </div>
                      </div>
                    </div>

                    <div class="text-right w-100 col-xl-12 pb-5 pt-5">
                      <button mat-flat-button class="custome-button mat-primary schedbtn" (click)="addUpdateDiagnosisData()" [hidden]="isShow">Save</button>
                      <button type="button" mat-stroked-button class="transperent-button light-sky primary schedbtn" (click)="diagnosisClear()" [hidden]="isShow">Clear</button>
                    </div>
                  </div>
                </form>
              </mat-tab>

              <mat-tab label="Procedure">
                <form [formGroup]="procedureForm">
                  <div class="p-4">
                    <h5 class="py-2 pt-3">Visit Details</h5>
                    <div class="row">

                      <div class="col-xl-3 col-lg-6 pb-3 pt-3">
                        <mat-form-field class="w-100" appearance="outline">
                          <mat-label>Visit Date & Time</mat-label>
                          <input matInput formControlName="VisitDateandTime2" readonly>
                        </mat-form-field>
                      </div>

                      <div class="col-xl-2 col-lg-6 pb-3 pt-3">
                        <mat-form-field class="w-100" appearance="outline">
                          <mat-label>Recorded Date</mat-label>
                          <input matInput [matDatepicker]="proc" formControlName="RecordedDate2">
                          <mat-datepicker-toggle matSuffix [for]="proc"></mat-datepicker-toggle>
                          <mat-datepicker #proc></mat-datepicker>
                        </mat-form-field>
                      </div>

                      <div class="col-lg-2 timepick pb-3 pt-3">
                        <mat-form-field class="input-full-width timer w-100" appearance="outline">
                          <input matInput [ngxTimepicker]="proc1" [disableClick]="true" formControlName="RecordedTime2">
                          <mat-label>Recorded Time</mat-label>
                          <ngx-material-timepicker-toggle [for]="proc1"></ngx-material-timepicker-toggle>
                          <ngx-material-timepicker #proc1 defaultTime="{{time}}"></ngx-material-timepicker>
                        </mat-form-field>
                      </div>

                      <div class="col-xl-2 col-lg-6 pb-3 pt-3">
                        <mat-form-field class="w-100" appearance="outline">
                          <mat-label>Recorded During</mat-label>
                          <input matInput placeholder="Enter" formControlName="recordedDuring2" maxlength="75" readonly>
                        </mat-form-field>
                      </div>

                      <div class="col-xl-3 col-lg-6 pb-3 pt-3">
                        <mat-form-field class="w-100" appearance="outline">
                          <mat-label><span class="required-asterisk" *ngIf="(procedureForm.value.RecordedBy2 == '' || procedureForm.value.RecordedBy2 == null) ? true : false"></span>Recorded By</mat-label>
                          <mat-select formControlName="RecordedBy2">
                            <mat-option *ngFor="let value of recordby" [value]="value">{{value}}</mat-option>
                          </mat-select>
                        </mat-form-field>
                      </div>
                    </div>

                    <div class="row mt-4">
                      <div class="col-xl-6 col-lg-6">
                        <mat-form-field class="w-100" appearance="outline" [matTooltip]="procedureForm.get('ChiefComplaint2').value" matTooltipPosition="above" matTooltipClass="Tooltip-lg">
                          <mat-label><span class="required-asterisk" *ngIf="(procedureForm.value.ChiefComplaint2 == '' || procedureForm.value.ChiefComplaint2 == null) ? true : false"></span>Chief Complaint</mat-label>
                          <textarea matInput placeholder="Enter" rows="1" cols="1" maxlength="500" formControlName="ChiefComplaint2"></textarea>
                        </mat-form-field>
                      </div>

                      <div class="col-xl-6 col-lg-6">
                        <mat-form-field class="w-100" appearance="outline" [matTooltip]="procedureForm.get('DiagnosisNotes2').value" matTooltipPosition="above" matTooltipClass="Tooltip-lg">
                          <mat-label>Diagnosis Notes</mat-label>
                          <textarea matInput placeholder="Enter" rows="1" cols="1" maxlength="500" formControlName="DiagnosisNotes2"></textarea>
                        </mat-form-field>
                      </div>

                      <div class="col-xl-3 col-lg-6">
                        <mat-form-field class="w-100" appearance="outline">
                          <mat-label><span class="required-asterisk" *ngIf="(procedureForm.value.TreatmentType == '' || procedureForm.value.TreatmentType == null) ? true : false"></span>Treatment Type</mat-label>
                          <mat-select formControlName="TreatmentType">
                            <mat-option *ngFor="let type of treatmentType" [value]="type.TreatmentTypeDesc">{{type.TreatmentTypeDesc}}</mat-option>
                          </mat-select>
                        </mat-form-field>
                      </div>

                      <div class="col-xl-6 col-lg-6">
                        <mat-form-field class="w-100" appearance="outline" [matTooltip]="procedureForm.get('ProcedureNotes').value" matTooltipPosition="above" matTooltipClass="Tooltip-lg">
                          <mat-label><span class="required-asterisk" *ngIf="(procedureForm.value.ProcedureNotes == '' || procedureForm.value.ProcedureNotes == null) ? true : false"></span>Procedure Notes</mat-label>
                          <textarea matInput placeholder="Enter" rows="1" cols="1" maxlength="500" formControlName="ProcedureNotes"></textarea>
                        </mat-form-field>
                      </div>

                      <div class="col-xl-3 col-lg-6">
                        <mat-form-field class=" w-100 " appearance="outline" [matTooltip]="reqProcedureTooltip" matTooltipPosition="above" matTooltipClass="Tooltip-md">
                          <mat-label>Requested Procedure</mat-label>
                          <mat-select formControlName="RequestedprocedureId" multiple>
                            <mat-option *ngFor="let problem of requestedProcedures" (click)="setReqProcedureTooltip()" [value]="problem.RequestedProcedureId">{{problem.RequestedProcedureDescription}}</mat-option>
                          </mat-select>
                        </mat-form-field>
                      </div>

                      <div class="col-xl-3 col-lg-6">
                        <mat-form-field class=" w-100 " appearance="outline">
                          <mat-label>Procedure Date</mat-label>
                          <input matInput [matDatepicker]="proceduredate" placeholder="Procedure Date" formControlName="Proceduredate" autocomplete="off">
                          <mat-datepicker-toggle matSuffix [for]="proceduredate">
                          </mat-datepicker-toggle>
                          <mat-datepicker #proceduredate></mat-datepicker>
                        </mat-form-field>
                      </div>

                      <div class="col-xl-6 col-lg-6">
                        <mat-form-field class="w-100" appearance="outline" [matTooltip]="cptTooltip" matTooltipPosition="above" matTooltipClass="Tooltip-lg">
                          <mat-label>Primary CPT Code</mat-label>
                          <mat-icon matSuffix *ngIf="(procedureForm.value.PrimaryCPT == '' || procedureForm.value.PrimaryCPT == null) ? true : (procedureForm.value.PrimaryCPT.length > 2) ? false : true">search</mat-icon>
                          <textarea placeholder="Type and Select" rows="1" matInput #autoCompleteCPTInput="matAutocompleteTrigger" [matAutocomplete]="cptCode" maxlength="500" formControlName="PrimaryCPT"></textarea>
                          <mat-autocomplete autoActiveFirstOption #cptCode="matAutocomplete">
                            <mat-option *ngFor="let CPT of CPTCodes" (onSelectionChange)="setCPTTooltip(CPT.CPTCode, CPT.Description)" [value]="CPT.CPTCode + '-' + CPT.Description">{{CPT.CPTCode}} - {{CPT.Description}}</mat-option>
                          </mat-autocomplete>
                        </mat-form-field>
                      </div>

                      <div class="col-xl-3 col-lg-6">
                        <mat-form-field class="w-100" appearance="outline">
                          <mat-label><span class="required-asterisk" *ngIf="(procedureForm.value.ProcedureStatus == '' || procedureForm.value.ProcedureStatus == null) ? true : false"></span>Procedure Status</mat-label>
                          <mat-select formControlName="ProcedureStatus">
                            <mat-option *ngFor="let proStatus of procedureStatus" [value]="proStatus.ProcedureStatusDesc">{{proStatus.ProcedureStatusDesc}}</mat-option>
                          </mat-select>
                        </mat-form-field>
                      </div>

                      <div class="col-xl-2 col-lg-6">
                        <section class="example-section">
                          <mat-checkbox class="example-margin" formControlName="IsReferred" (change)="isRefered($event)">Referral</mat-checkbox>
                        </section>
                      </div>

                      <div class="col-xl-6 col-lg-6">
                        <mat-form-field class="w-100" appearance="outline" [matTooltip]="procedureForm.get('ReferralNotes').value" matTooltipPosition="above" matTooltipClass="Tooltip-lg">
                          <mat-label>Referral Notes</mat-label>
                          <textarea matInput placeholder="Enter" rows="1" cols="1" maxlength="500" formControlName="ReferralNotes" [readonly]="!isReferedLab"></textarea>
                        </mat-form-field>
                      </div>

                      <div class="col-xl-6 col-lg-6">
                        <mat-form-field class="w-100" appearance="outline" [matTooltip]="procedureForm.get('FollowUpNotes').value" matTooltipPosition="above" matTooltipClass="Tooltip-lg">
                          <mat-label>Follow Up Notes</mat-label>
                          <textarea matInput placeholder="Enter" rows="1" cols="1" maxlength="500" formControlName="FollowUpNotes"></textarea>
                        </mat-form-field>
                      </div>

                      <div class="col-xl-6 col-lg-6">
                        <mat-form-field class="w-100" appearance="outline" [matTooltip]="procedureForm.get('AdditionalNotes').value" matTooltipPosition="above" matTooltipClass="Tooltip-lg">
                          <mat-label>Additional Notes</mat-label>
                          <textarea matInput placeholder="Enter" rows="1" cols="1" maxlength="500" formControlName="AdditionalNotes"></textarea>
                        </mat-form-field>
                      </div>

                      <div class="col-xl-6 col-lg-6">
                        <mat-form-field class="w-100" appearance="outline" [matTooltip]="icdTooltip" matTooltipPosition="above" matTooltipClass="Tooltip-lg">
                          <mat-label>Primary ICD Code</mat-label>
                          <mat-icon matSuffix *ngIf="(procedureForm.value.PrimaryICD == '' || procedureForm.value.PrimaryICD == null) ? true : (procedureForm.value.PrimaryICD.length > 2) ? false : true">search</mat-icon>
                          <textarea placeholder="Type and Select" rows="1" matInput #autoCompleteICDInput="matAutocompleteTrigger" [matAutocomplete]="icdCode1" maxlength="500" formControlName="PrimaryICD"></textarea>
                          <mat-autocomplete autoActiveFirstOption #icdCode1="matAutocomplete">
                            <mat-option *ngFor="let ICD of ICDCode" (onSelectionChange)="setICDTooltip(ICD.ICDCode, ICD.Description)" [value]="ICD.ICDCode + '-' + ICD.Description">{{ICD.ICDCode}} - {{ICD.Description}}</mat-option>
                          </mat-autocomplete>
                        </mat-form-field>
                      </div>
                    </div>
                  </div>

                  <div class="text-right justify-content-end">
                    <button mat-flat-button class="custome-button mat-primary schedbtn" (click)="addUpdateProcedureData()" [hidden]="isShow">Save</button>
                    <button type="button" mat-stroked-button class="transperent-button light-sky primary schedbtn" (click)="procedureClear()" [hidden]="isShow">Clear</button>
                  </div>
                </form>
              </mat-tab>

              <mat-tab label="Care Plan">
                <form [formGroup]="carePlanForm">
                  <div class="p-4">
                    <h5 class="py-2 pt-3">Visit Details</h5>
                    <div class="row">

                      <div class="col-xl-3 col-lg-6 pb-3 pt-3">
                        <mat-form-field class="w-100" appearance="outline">
                          <mat-label>Visit Date & Time</mat-label>
                          <input matInput placeholder="Enter" formControlName="VisitDateandTime3" readonly>
                        </mat-form-field>
                      </div>

                      <div class="col-xl-2 col-lg-6 pb-3 pt-3">
                        <mat-form-field class="w-100" appearance="outline">
                          <mat-label>Recorded Date</mat-label>
                          <input matInput [matDatepicker]="proc3" formControlName="RecordedDate3">
                          <mat-datepicker-toggle matSuffix [for]="proc3"></mat-datepicker-toggle>
                          <mat-datepicker #proc3></mat-datepicker>
                        </mat-form-field>
                      </div>

                      <div class="col-lg-2 timepick pb-3 pt-3">
                        <mat-form-field class="input-full-width timer w-100" appearance="outline">
                          <input matInput [ngxTimepicker]="proc4" [disableClick]="true" formControlName="RecordedTime3">
                          <mat-label>Record Time</mat-label>
                          <ngx-material-timepicker-toggle [for]="proc4"></ngx-material-timepicker-toggle>
                          <ngx-material-timepicker #proc4 defaultTime="{{time}}"></ngx-material-timepicker>
                        </mat-form-field>
                      </div>

                      <div class="col-xl-2 col-lg-6 pb-3 pt-3">
                        <mat-form-field class="w-100" appearance="outline">
                          <mat-label>Recorded During</mat-label>
                          <input matInput placeholder="Enter" [value]="recordedDuring" maxlength="75" formControlName="recordedDuring3" readonly>
                        </mat-form-field>
                      </div>

                      <div class="col-xl-3 col-lg-6 pb-3 pt-3">
                        <mat-form-field class="w-100" appearance="outline">
                          <mat-label><span class="required-asterisk" *ngIf="(carePlanForm.value.RecordedBy3 == '' || carePlanForm.value.RecordedBy3 == null) ? true : false"></span>Recorded By</mat-label>
                          <mat-select formControlName="RecordedBy3">
                            <mat-option *ngFor="let value of recordby" [value]="value">{{value}}</mat-option>
                          </mat-select>
                        </mat-form-field>
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-xl-6 col-lg-6">
                        <mat-form-field class="w-100" appearance="outline" [matTooltip]="carePlanForm.get('PlanningActivity').value" matTooltipPosition="above" matTooltipClass="Tooltip-lg">
                          <mat-label>Planned Activity</mat-label>
                          <textarea matInput placeholder="Enter" rows="1" cols="1" maxlength="500" formControlName="PlanningActivity"></textarea>
                        </mat-form-field>
                      </div>

                      <div class="col-xl-3 col-lg-6">
                        <mat-form-field class="w-100" appearance="outline">
                          <mat-label>Duration</mat-label>
                          <input matInput placeholder="Enter" formControlName="Duration" numeric autocomplete="off">
                        </mat-form-field>
                      </div>

                      <div class="col-xl-3 col-lg-6">
                        <mat-form-field class="w-100" appearance="outline">
                          <mat-label>Start Date</mat-label>
                          <input matInput [matDatepicker]="startDate" placeholder="Start Date" formControlName="StartDate" autocomplete="off">
                          <mat-datepicker-toggle matSuffix [for]="startDate">
                          </mat-datepicker-toggle>
                          <mat-datepicker #startDate></mat-datepicker>
                        </mat-form-field>
                      </div>

                      <div class="col-xl-3 col-lg-6">
                        <mat-form-field class="w-100" appearance="outline">
                          <mat-label>End Date</mat-label>
                          <input matInput [matDatepicker]="endDate" placeholder="End Date" formControlName="EndDate" autocomplete="off">
                          <mat-datepicker-toggle matSuffix [for]="endDate">
                          </mat-datepicker-toggle>
                          <mat-datepicker #endDate></mat-datepicker>
                        </mat-form-field>
                      </div>

                      <div class="col-xl-3 col-lg-6">
                        <mat-form-field class=" w-100 " appearance="outline">
                          <mat-label>Status</mat-label>
                          <mat-select formControlName="CarePlanStatus">
                            <mat-option *ngFor="let value of status" [value]="value.CarePlanStatusDesc">{{value.CarePlanStatusDesc}}</mat-option>
                          </mat-select>
                        </mat-form-field>
                      </div>

                      <div class="col-xl-6 col-lg-6">
                        <mat-form-field class=" w-50 " appearance="outline">
                          <mat-label>Progress</mat-label>
                          <mat-select formControlName="Progress">
                            <mat-option *ngFor="let value of progress" [value]="value.CarePlanProgressDesc">{{value.CarePlanProgressDesc}}</mat-option>
                          </mat-select>
                        </mat-form-field>
                      </div>

                      <h5 class="py-4 pt-3 col-xl-12">Schedule</h5>

                      <div class="col-xl-3 col-lg-6">
                        <mat-form-field class=" w-100 " appearance="outline">
                          <mat-label>Next Visit Date</mat-label>
                          <input matInput [matDatepicker]="nxtvisitDate" placeholder="End Date" formControlName="NextVisitDate" autocomplete="off">
                          <mat-datepicker-toggle matSuffix [for]="nxtvisitDate">
                          </mat-datepicker-toggle>
                          <mat-datepicker #nxtvisitDate></mat-datepicker>
                        </mat-form-field>
                      </div>

                      <div class="col-xl-6 col-lg-6">
                        <mat-form-field class="w-100" appearance="outline" [matTooltip]="carePlanForm.get('AdditionalNotes1').value" matTooltipPosition="above" matTooltipClass="Tooltip-lg">
                          <mat-label>Additional Information</mat-label>
                          <textarea matInput placeholder="Enter" rows="1" cols="1" maxlength="500" formControlName="AdditionalNotes1"></textarea>
                        </mat-form-field>
                      </div>
                    </div>

                    <div class="text-right justify-content-end">
                      <button mat-flat-button class="custome-button mat-primary schedbtn" (click)="addUpdateCarePlanData()" [hidden]="isShow">Save</button>
                      <button type="button" mat-stroked-button class="transperent-button light-sky primary schedbtn" (click)="carePlanClear()" [hidden]="isShow">Clear</button>
                    </div>
                  </div>
                </form>
              </mat-tab>
            </mat-tab-group>
          </div>
        </div>
      </div>

      <div class="row mt-4 my-3">
        <div class="col-md-12 col-sm-12 col-xs-12  dark-color padding-none">
          <mat-card>
            <form [formGroup]="signOffForm">
              <div class="row d-flex align-items-center mt-4">

                <div class="col-xl-3 col-lg-3">
                  <mat-form-field class="w-100 " appearance="outline">
                    <mat-label>UserName</mat-label>
                    <input matInput placeholder="Enter" formControlName="UserName">
                  </mat-form-field>
                </div>

                <div class="col-xl-3 col-lg-3">
                  <mat-form-field class="w-100 " appearance="outline">
                    <mat-label>Password</mat-label>
                    <input matInput type="password" placeholder="Enter" formControlName="Password">
                  </mat-form-field>
                </div>

                <div class="col-xl-6 col-lg-6 text-right">
                  <button type="button" mat-flat-button color="primary" class="custome-button mat-primary m-2" (click)="back()">Back</button>
                  <button type="button" mat-flat-button color="primary" class="custome-button mat-primary" [hidden]="isShow" (click)="signOffModel()">Sign Off</button>
                </div>
              </div>
            </form>
          </mat-card>
        </div>
      </div>
    </div>

    <div class="col-xl-2 pr-0">
      <div class="col-xl-12 ml-0 px-0 mt-2">
        <mat-accordion>
          <mat-expansion-panel [expanded]="true">
            <mat-expansion-panel-header>
              <mat-panel-title>
                <h4>Reports</h4>
              </mat-panel-title>
            </mat-expansion-panel-header>

            <div class="row">
              <ul class="col-xl-12 navbar-nav p-0 m-0 case-border">
                <li class="px-3 py-2">
                  <p class="cursor-pointer mb-0" (click)="openVisitSummary()">
                    <img src="assets/images/MenuNewIcons/triage/visit_intake.png" class="imgBtnImg" title="Intake Summary" width="25px" />
                    <span class="pl-2 mt-2">Visit Intake</span>
                  </p>
                </li>
        
                <li class="px-3 py-2">
                  <p class="cursor-pointer mb-0" (click)="openImages()">
                    <img src="assets/images/MenuNewIcons/triage/image.png" class="imgBtnImg" title="Images" width="25px" />
                    <span class="pl-2">Images</span>
                  </p>
                </li>
              </ul>
            </div>
          </mat-expansion-panel>
        </mat-accordion>

        <mat-accordion>
          <mat-expansion-panel [expanded]="true">
            <mat-expansion-panel-header>
              <mat-panel-title>
                <h4>Orders</h4>
              </mat-panel-title>
            </mat-expansion-panel-header>

            <div class="row">
              <ul class="col-xl-12 navbar-nav p-0 m-0 case-border">
                <li class="px-3 py-2">
                  <p class="cursor-pointer mb-0" (click)="openEprescription()">
                    <img src="assets/images/MenuNewIcons/triage/e_prescription.png" class="imgBtnImg" title="e-Prescription" width="25px" />
                    <span class="pl-2 mt-2">e-Prescription</span><span class="tick-icon pull-right">
                    </span>
                  </p>
                </li>
                <li class="px-3 py-2">
                  <p class="cursor-pointer mb-0" (click)="openElabOrder()">
                    <img src="assets/images/MenuNewIcons/triage/e_lab.png" class="imgBtnImg" title="e-Lab Order" width="25px" />
                    <span class="pl-2">e-Lab</span><span class="tick-icon pull-right">
                    </span>
                  </p>
                </li>
 
              </ul>
            </div>
          </mat-expansion-panel>
        </mat-accordion>
      </div>
    </div>
  </div>
</div>